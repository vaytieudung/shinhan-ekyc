# "Planning with the Gemini API" - a Firebase AI sample app

Welcome to the _Planning with the Gemini API_ sample app, an AI-powered web app
for to-do lists! It's an [Angular](https://angular.io/) app built using the
Gemini Developer API, Firebase AI Logic, and Firestore.

The [Gemini API](https://ai.google.dev/gemini-api) gives you access to Google's latest
generative AI models – the Gemini family of multimodal models.
This _Planning with the Gemini API_ web app calls the Gemini API to generate a task list
from either text or an image provided by the end user.

The backend of _Planning with the Gemini API_ is powered by
[Firebase](https://firebase.google.com/), which is Google's platform for
building fullstack multi-platform apps. This app uses
[Firebase Authentication](https://firebase.google.com/products/auth) for signing-in
and authorizing end users. It also uses
[Firestore](https://firebase.google.com/products/firestore) – a NoSQL realtime database –
to store the to-do list items.

This app specifically uses the Firebase AI Logic client SDK for Web which means your
Gemini API key is _**not**_ added to the app's codebase
([learn more](https://firebase.google.com/docs/ai-logic/faq-and-troubleshooting#add-gemini-api-key-to-codebase)).
If you're interested in developing this app further, **it's critical that you
[integrate with Firebase App Check](https://firebase.google.com/docs/ai-logic/app-check)**
so that only requests from your actual app and verified devices are passed through to the backend.

## Explore the app's codebase

- In `src/bootstrap.js`, you can find important configuration values:

  - Within `firebase`, find the values needed to connect your app to Firebase
    (most importantly `apiKey`, `projectId`, and `appId`).

  Note that if you
  [run the sample app in Firebase Studio](https://github.com/FirebaseExtended/make-it-so-angular/main/README.md#set-up-and-run-the-app),
  then these config values will be automatically populated into the file for you.

- In `src/app/services/task.service.ts`, you can explore how to make a basic call to
  the Gemini Developer API using Firebase AI Logic, including:

  - Importing the Firebase AI Logic package: `@angular/fire/ai`.
  - Initializing the Gemini Developer API backend service and creating a `GenerativeModel` instance.
  - Calling `generateContent` to send the request to a Gemini model with the provided prompt
    (and image, if provided).

- In `src/app/app.config.ts` and `src/app/services/task.service.ts`, you can explore
  how to use Firebase, including:

  - Using Firebase Authentication's
    [anonymous authentication method](https://firebase.google.com/docs/auth/web/anonymous-auth)
    to create an authenticated user account.
  - Using Firestore to write and read to-do tasks and subtasks generated by a Gemini model.

## Set up and run the app

You can either run the sample app in Firebase Studio (recommended) or locally.

### Option 1: Run in Firebase Studio _(recommended)_

This _Planning with the Gemini API_ web app is best experienced by running it in
[Firebase Studio](https://firebase.studio//), which is Google's browser-based workspace for
building, shipping, and managing full-stack multiplatform apps.

Firebase provides a custom workflow using Firebase Studio to help you quickly experiment with the sample app.
This workflow automatically sets up a new Firebase project with Authentication and Firestore
enabled, allows you to open the sample app in Firebase Studio, and sets up the app to use Firebase and the Gemini API.
The project and app are yours to experiment with and explore how the Gemini API works.

[GET STARTED WITH THE SAMPLE APP IN FIREBASE STUDIO](https://console.firebase.google.com/?idxSampleProjectTemplateId=gemini&dlAction=IdxSampleProject)

You can also kick-off this custom workflow from the Firebase console from various banners.

NOTE: This workflow creates a new Firebase Studio workspace. If you run out of workspace quota, go to [studio.firebase.google.com](studio.firebase.google.com/) to delete an old workspace.

### Option 2: Run locally

You can also run this _Planning with the Gemini API_ web app locally. You'll just need
to complete some manual setup steps.

#### Prerequisites

- Node.js v20+
- npm v10+
- Angular CLI 18+

#### Setup instructions

1.  Set up Firebase:
    a. Create a new Firebase project in the
    [Firebase console](https://console.firebase.google.com/).
    You can skip setting up Google Analytics.
    b. Set up [Firestore](https://console.firebase.google.com/u/0/project/_/firestore)
    and [anonymous authentication](https://console.firebase.google.com/u/0/project/_/authentication)
    in your new project.
    c. Create a new Firebase web app in your new project.
    You can skip setting up Firebase Hosting.
    d. Copy your Firebase config object, and replace the placeholder values in the
    `src/bootstrap.js` file of the sample app.

2.  Set up Firebase AI Logic to use the Gemini Developer API:
    a. In the Firebase console, go to the [**Firebase AI Logic** page](https://console.firebase.google.com/project/_/ailogic).
    b. Click **Get started** to launch a guided workflow that helps you set up the required APIs and resources for your project.
    c. Select the **Gemini Developer API**.
    The console will enable the required APIs and create a new, dedicated Gemini API key in your project.
    _Do not add this new Gemini API key into your app's codebase
    ([learn more](https://firebase.google.com/docs/ai-logic/faq-and-troubleshooting#add-gemini-api-key-to-codebase))._
    d. Continue with any remaining on-screen instructions.


3.  Run `npm install` to install the app's dependencies.

4.  Serve the app:
    a. Run `ng serve` to start the Angular development server.
    b. Open your browser and navigate to `http://localhost:4200`.

## Interact with the app

1.  Create a new task.\
    Click the "New task" button on the left to initiate the creation of a new task.
    The Gemini model suggests a task title. Edit the title as desired.

2.  Generate subtasks.\
    The Gemini model can generate a list of subtasks based either on your title and/or an uploaded image.

3.  Save the task to add it to the dashboard of to-do tasks.


## Troubleshooting


```
Check Firestore permissions in Firebase Console: link
```

This error happens because
[Firestore security rules](https://firebase.google.com/docs/firestore/security/get-started)
are blocking requests from your app. Here's how to resolve it:

1.  Go to the Firebase console using the link provided in the error message.
2.  Check that the security rules are what you expect. In particular,
    `timestamp.date` should be in the future.
3.  Reload the web preview, if necessary.

## Docs

- [Firebase AI Logic documentation](https://firebase.google.com/docs/ai-logic)
- [FAQ about this sample app](https://firebase.google.com/support/faq/#console-sample-app-experience)
- [Firebase Support](https://firebase.google.com/support)
